# Client Proposal & Invoice Drafting Assistant

A Make (Integromat) scenario that turns Google Form submissions into a polished proposal and a ready-to-send invoice PDF, then emails both to the client automatically.

## What it does
- Listens for new Google Forms responses (client/project details).
- Drafts a professional proposal using OpenAI (GPT-3.5).
- Extracts structured invoice data from the proposal with OpenAI.
- Creates a Google Docs invoice from a template and converts it to PDF.
- Emails the client the proposal (as plain text) with the invoice PDF attached.

## Trigger
- Google Forms: Watch responses for Form ID: 1_eHINokTpe2afTcLRcPAVBYhd6rEgPl-IM2hX0S-YMk

## Inputs (from Google Form)
- Client Name
- Client Email
- Project Description
- Deliverables
- Timeline
- Price/Rate
- Any Extra Notes

Notes:
- These map to internal question IDs in the form (e.g., 0c572819 for Client Name, 225fd079 for Client Email, etc.).
- The scenario uses text answers from these fields to compose the proposal and populate the invoice.

## Main Steps
1. Draft proposal (OpenAI)
   - Model: gpt-3.5-turbo
   - Creates a persuasive proposal with sections: description, deliverables, timeline, price, and a call-to-action.

2. Branch A: Build invoice
   - Extracts JSON from the proposal (OpenAI), returning:
     - client_name, client_email, project_description, deliverables (list), timeline, price, extra_notes
     - invoice_number (INV-XXXX), issue_date (YYYY-MM-DD), due_date (+30 days)
   - Parses JSON.
   - Creates a Google Doc from template:
     - Template ID: 1C8Xv11XdD3040-Z4C0NVUd2xYygihDsKTRuR6oyyw5E
     - Output name: invoice_number
     - Destination folder ID: 1Pezwi6IukW_y-BfWEMrlhIEeHOdqrgMW
     - Mapped placeholders: invoice_number, issue_date, due_date, client_name, client_email, project_description, deliverables, price, extra_notes
   - Converts the Google Doc to PDF via PDF.co and stores:
     - URL (download link)
     - Content ID (job ID)

3. Branch B: Send email
   - Retrieves: Proposal text, PDF URL, Content ID.
   - Downloads the PDF via HTTP GET.
   - Sends email (Gmail) to Client Email:
     - Subject: “Proposal and Invoice”
     - Body: proposal text
     - Attachment: downloaded PDF

## Outputs
- Email to the client containing:
  - Proposal (plain text in the body)
  - Invoice PDF attachment
- A Google Doc (invoice) created in the specified Drive folder.
- A temporary PDF download link generated by PDF.co (used internally to fetch attachment).

## Requirements
- Google connections:
  - Google Forms (watch responses)
  - Google Docs / Drive (document from template)
  - Gmail (send email; “Google Restricted” connection in this setup)
- OpenAI API connection (GPT-3.5-turbo)
- PDF.co connection (document-to-PDF conversion)

## Configuration
- Update IDs as needed:
  - Form ID (Google Forms)
  - Template ID (Google Docs)
  - Destination Folder ID (Google Drive)
- Ensure the Google Doc template contains placeholders that match the mapped keys:
  - invoice_number, issue_date, due_date, client_name, client_email, project_description, deliverables, price, extra_notes
- Verify the Gmail connection has permission to send from the desired account.
- Optional: Adjust OpenAI settings (temperature, max_tokens) for tone/length.

## Notes and Limitations
- If the client email is missing, the email step may fail; ensure the form enforces an email address.
- PDF.co link expiration is set to 60 (minutes), but the file is downloaded immediately and attached to the email.
- The router executes both branches for each response: invoice creation (A) and email sending (B).
- Proposal and invoice content depend on the quality and completeness of form inputs.

## Customization Ideas
- CC or BCC your team on outgoing emails.
- Save the invoice PDF to Drive before emailing (instead of downloading via URL).
- Add a CRM step (e.g., log proposal/invoice metadata).
- Switch OpenAI model or prompt tone to match your brand voice.