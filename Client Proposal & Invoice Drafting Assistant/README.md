# Client Proposal & Invoice Drafting Assistant

Automates proposal drafting and invoicing from a Google Form submission. It drafts a client-ready proposal with OpenAI, extracts structured invoice data, generates a Google Docs invoice from a template, converts it to PDF, and emails the client the proposal with the invoice attached.

## How it works
1. Trigger: Watches a specific Google Form for new responses.
2. Proposal drafting: Uses OpenAI (gpt-3.5-turbo) to generate a professional proposal from the form fields.
3. Data extraction: Converts the proposal text into structured JSON (client_name, email, deliverables list, timeline, price, extra_notes, invoice_number, issue_date, due_date).
4. Invoice generation:
   - Creates a Google Docs invoice from a template with the extracted data.
   - Converts the new document to a PDF via PDF.co.
5. Email delivery: Downloads the PDF and sends an email to the client with:
   - Subject: “Proposal and Invoice”
   - Body: The drafted proposal text
   - Attachment: The generated invoice PDF

## Inputs
From Google Form (required fields):
- Client Name
- Client Email
- Project Description
- Deliverables
- Timeline
- Price/Rate
- Any Extra Notes

System/config inputs:
- Google Form ID
- Google Docs template ID
- Destination Google Drive folder ID
- OpenAI connection (gpt-3.5-turbo)
- PDF.co connection
- Gmail (Google Restricted) connection for sending email

## AI-generated fields
- invoice_number: INV-XXXX (4 random digits)
- issue_date: today’s date (YYYY-MM-DD)
- due_date: 30 days after issue_date
- deliverables: normalized as a list

## Outputs
- Email to the Client Email with:
  - Subject: “Proposal and Invoice”
  - Body: Drafted proposal text
  - Attachment: Invoice PDF
- Google Drive:
  - A new invoice Google Doc titled with the invoice_number in the specified folder
- Temporary PDF link used internally to fetch and attach the PDF (downloaded and sent; not stored by default)

## Template merge fields
Your Google Docs invoice template must contain placeholders matching these keys (mapped by the scenario):
- invoice_number
- issue_date
- due_date
- client_name
- client_email
- project_description
- deliverables
- price
- extra_notes

## Modules used
- Google Forms: Watch Responses (trigger)
- OpenAI: Create Chat Completion (proposal drafting)
- OpenAI: Create Chat Completion (JSON extraction)
- JSON: Parse JSON
- Google Docs: Create a Document from Template
- PDF.co: Convert Document to PDF
- HTTP: Download file (PDF)
- Email: Send Email (Gmail)

## Assumptions and notes
- The router executes the invoice creation and the email delivery in order so the PDF is available before sending.
- The PDF link generated by PDF.co is temporary and only used to download the attachment for the email.
- If you change Google Form questions, update the field mappings accordingly.
- To also store the PDF in Drive, add a step to upload the downloaded PDF to Google Drive.

## Setup checklist
- Connect accounts: Google (Forms/Docs/Drive), OpenAI, PDF.co, Gmail.
- Set the Google Form ID in the trigger.
- Provide the Google Docs template ID and destination folder ID.
- Ensure your template contains the listed merge fields.
- Test by submitting the Google Form and verifying the received email and created invoice document.